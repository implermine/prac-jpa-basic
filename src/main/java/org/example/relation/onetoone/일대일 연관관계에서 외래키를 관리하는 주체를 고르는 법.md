# 일대일 연관관계에서 외래키를 관리하는 주체를 고르는 법

> 외래키를 관리하는 주체는,
> 추후 1 -> N이 될 수 있는 주체이다.
> 저는 이런한 생각이 더 Dominant 하다고 생각합니다.


---

예를들어,
Member와 Inventory(장바구니)가 1:1 관계라 할 때,
유저가 하나의 장바구니가 아닌, 여러 장바구니를 가져야 할 Needs가 발생할 수 있다.

따라서, 이런 경우엔 Inventory 입장에서 외래키를 관리하고 있던게, unique 조건만 alter해주면 되므로,
이런 경우엔 inventory에서 외래키를 관리하고 있던게, 더 추후 미래를 생각해보면 맞다.

---

그리고 개인적으로 이러한 상황에서 DB 입장이 아닌 Member는 Inventory보다 더 추상적으로 더 넓은 Domain을 차지 해 보인다.

다른 데이터들과 연관 될 확률이 더 높은 Member에 Foreign key라는 데이터를 추가하는 것 보다,

더더욱 Miscellaneous한 데이터에서 FK를 갖고 있는것이 더 나아보인다.


---

근데 객체입장에선 그게 또 아니라네, Member 측에서 Locker Id를 갖고 있는것이 성능상이나 여러점에서 이점을 갖는다고함 - 김영한

---

# 일대일 정리

* 주 테이블에 외래 키
    * 주 객체가 대상 객체의 참조를 가지는 것 처럼<br/> 주 테이블에 외래키를 두고 대상 테이블을 찾음
    * 객체지향 개발자 선호
    * JPA 매핑 편리
    * 장점: 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능
    * 단점: 값이 없으면 외래 키에 null 허용
* 대상 테이블에 외래 키
    * 대상 테이블에 외래 키가 존재
    * 전통적인 데이터베이스 개발자 선호
    * 장점: 주 테이블과 대상 테이블을 일대일에서 일대다 관계로 변경할 때 테이블 구조 유 지
    * 단점: 프록시 기능의 한계로 지연 로딩으로 설정해도 항상 즉시 로딩됨(프록시는 뒤에서 설명) -> 먼말이고?